<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>ç™½å…­å³æ™‚åŒ¯ç‡è¨ˆç®—æ©Ÿ - App Skin ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; height: 100vh; display: flex; align-items: center; justify-content: center; background-color: #333; overflow: hidden; font-family: 'Segoe UI', Roboto, sans-serif; }

        /* å¤–å±¤æ‰‹æ©Ÿå®¹å™¨æ®¼ */
        .phone-shell {
            width: 100%;
            max-width: 400px;
            height: 90vh;
            position: relative;
            background-size: cover;
            background-position: center;
            border: 8px solid #ffffff; /* ç™½è‰² App å¤–é‚Šæ¡† */
            border-radius: 3rem;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ç£¨ç ‚ç»ç’ƒè¨ˆç®—æ©Ÿä¸»é¢æ¿ */
        .glass-container {
            position: absolute;
            bottom: 40px;
            left: 20px;
            right: 20px;
            top: 60px;
            background: rgba(255, 255, 255, 0.15); /* æ¥µé€æ˜åº•è‰² */
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 2rem;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        /* é¡¯ç¤ºå€ */
        .display-area {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 1.2rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
            text-align: right;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* æŒ‰éµåŸºç¤æ¨£å¼ */
        .calc-button {
            border-radius: 1rem;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .calc-button:active { transform: scale(0.9); background: rgba(255,255,255,0.3); }

        /* å¤–çš®ç‰¹å®šé…è‰²é‚è¼¯ */
        .skin-default { background-color: #4f46e5; }
        .skin-hakka { background-image: url('./skin-hakka.jpg'); }
        .skin-starry { background-image: url('./skin-starry.jpg'); }

        /* ä¸»é¡Œæ–‡å­—èª¿æ•´ */
        .skin-starry h1 { color: #fde047; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        .skin-starry .calc-button.number { background: rgba(253, 224, 71, 0.1); }
        
        .skin-hakka h1 { color: #ffffff; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }

        .calculator-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; flex-grow: 1; }
        .currency-selectors { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; margin-bottom: 1rem; }
    </style>
</head>
<body>

  <div id="app-shell" class="phone-shell skin-default">
    
    <div class="glass-container">
        <header class="mb-6 text-center">
            <h1 class="text-3xl font-black italic tracking-widest text-white">BAILIU CALC</h1>
            <p id="update-status" class="text-[9px] font-bold tracking-widest text-white/60 mt-1 uppercase">Ready for Exchange</p>
        </header>

        <div class="display-area">
            <div id="display-expr" class="text-white/50 text-xs font-mono h-4 mb-1"></div>
            <div class="flex justify-between items-center">
                <span id="display-flag" class="text-xl">ğŸ‡¹ğŸ‡¼</span>
                <span id="display-val" class="text-3xl font-black text-white font-mono">0</span>
            </div>
        </div>

        <div id="currency-bar" class="currency-selectors"></div>

        <div class="calculator-grid">
            <button onclick="handleInput('C')" class="calc-button bg-red-500/80">C</button>
            <button onclick="handleInput('âŒ«')" class="calc-button">âŒ«</button>
            <button onclick="toggleSettings()" class="calc-button bg-indigo-500/80">âš™ï¸</button>
            <button onclick="handleInput('/')" class="calc-button bg-orange-500/80">Ã·</button>

            <button onclick="handleInput('7')" class="calc-button number">7</button>
            <button onclick="handleInput('8')" class="calc-button number">8</button>
            <button onclick="handleInput('9')" class="calc-button number">9</button>
            <button onclick="handleInput('*')" class="calc-button bg-orange-500/80">Ã—</button>

            <button onclick="handleInput('4')" class="calc-button number">4</button>
            <button onclick="handleInput('5')" class="calc-button number">5</button>
            <button onclick="handleInput('6')" class="calc-button number">6</button>
            <button onclick="handleInput('-')" class="calc-button bg-orange-500/80">-</button>

            <button onclick="handleInput('1')" class="calc-button number">1</button>
            <button onclick="handleInput('2')" class="calc-button number">2</button>
            <button onclick="handleInput('3')" class="calc-button number">3</button>
            <button onclick="handleInput('+')" class="calc-button bg-orange-500/80">+</button>

            <button onclick="handleInput('0')" class="calc-button number">0</button>
            <button onclick="handleInput('.')" class="calc-button number">.</button>
            <button onclick="handleInput('+/-')" class="calc-button">Â±</button>
            <button onclick="calculate()" class="calc-button bg-emerald-500/80">=</button>
        </div>
    </div>
  </div>

  <div id="settings-modal" class="fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center p-6 z-50 hidden">
    <div class="bg-white rounded-[2.5rem] w-full max-w-sm p-8">
      <h2 class="text-xl font-bold mb-6 text-gray-800 border-b pb-2">é¸æ“‡ä¸»é¡Œ Skin</h2>
      
      <div class="grid grid-cols-1 gap-3 mb-8">
        <button onclick="changeSkin('default')" class="w-full py-3 rounded-2xl bg-indigo-600 text-white font-bold">é è¨­æ¥µç°¡</button>
        <button onclick="changeSkin('hakka')" class="w-full py-3 rounded-2xl bg-blue-900 text-white font-bold">å®¢å®¶ç¢èŠ±å¸ƒ</button>
        <button onclick="changeSkin('starry')" class="w-full py-3 rounded-2xl bg-slate-900 text-yellow-400 font-bold border-2 border-yellow-500">æ¢µè°·æ˜Ÿå¤œ</button>
      </div>

      <button onclick="toggleSettings()" class="w-full py-4 bg-gray-100 text-gray-800 font-black rounded-2xl">é—œé–‰è¨­å®š</button>
    </div>
  </div>

  <script>
    let expression = '';
    let lastValue = 0;
    let currentCurrency = 'TWD';
    let exchangeRates = {};
    let DEFAULT_CURRENCIES = ['TWD','JPY','USD','EUR','CNY'];
    const FLAGS = {"TWD":"ğŸ‡¹ğŸ‡¼","USD":"ğŸ‡ºğŸ‡¸","JPY":"ğŸ‡¯ğŸ‡µ","EUR":"ğŸ‡ªğŸ‡º","CNY":"ğŸ‡¨ğŸ‡³"};

    // åˆ‡æ› Skin
    function changeSkin(skinName) {
        const shell = document.getElementById('app-shell');
        shell.className = `phone-shell skin-${skinName}`;
        localStorage.setItem('user-app-skin', skinName);
    }

    // è¨ˆç®—é‚è¼¯
    function handleInput(input) {
        if(input === 'C') { expression = ''; lastValue = 0; }
        else if(input === 'âŒ«') { expression = expression.slice(0, -1); }
        else { expression += input; }
        try { 
            const evalResult = eval(expression.replace(/[^-()\d/*+.]/g,''));
            if(isFinite(evalResult)) lastValue = evalResult;
        } catch(e) {}
        updateUI();
    }

    function calculate() {
        try {
            const result = eval(expression.replace(/[^-()\d/*+.]/g,''));
            if(isFinite(result)) {
                expression = String(result);
                lastValue = result;
            }
        } catch(e) {}
        updateUI();
    }

    function updateUI() {
        document.getElementById('display-expr').textContent = expression;
        document.getElementById('display-val').textContent = Number(lastValue).toLocaleString();
        document.getElementById('display-flag').textContent = FLAGS[currentCurrency] || 'ğŸ’°';
    }

    function toggleSettings() { document.getElementById('settings-modal').classList.toggle('hidden'); }

    // åˆå§‹åŒ–åŒ¯ç‡èˆ‡å¸¸ç”¨å¹£åˆ¥ (æ¨¡çµ„åŒ–)
    function initApp() {
        const bar = document.getElementById('currency-bar');
        DEFAULT_CURRENCIES.forEach(code => {
            const btn = document.createElement('button');
            btn.textContent = code;
            btn.className = "py-1 text-[10px] font-bold text-white/70 border border-white/20 rounded-md bg-white/10";
            btn.onclick = () => { currentCurrency = code; updateUI(); };
            bar.appendChild(btn);
        });
        const savedSkin = localStorage.getItem('user-app-skin') || 'default';
        changeSkin(savedSkin);
        updateUI();
    }

    window.onload = initApp;
  </script>
</body>
</html>
